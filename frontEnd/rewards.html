<!DOCTYPE HTML>
<html>
  <head>
    <title>Hartebeesport Dam Water Hyacinth Monitoring - Rewards</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
          <header id="header">
            <a href="index.html" class="logo"><strong>Hartebeesport Dam </strong>Water Hyacinth Monitoring</a>
            <ul class="icons">
              <li><button onclick="openLogin()" class="button">Login</button></li>
              <li><button onclick="openRegister()" class="button">Register</button></li>
            </ul>
          </header>
          
          <!-- Login/Register Modals -->
          <div id="loginModal" class="login-modal">
            <div class="login-container">
              <span class="close-btn" onclick="closeLogin()">×</span>
              <h2>Login</h2>
              <form id="loginForm">
                <input type="text" id="username" name="username" placeholder="Username" required>
                <input type="password" id="password" name="password" placeholder="Password" required>
                <button type="submit" class="button">Login</button>
              </form>
            </div>
          </div>
          <div id="registerModal" class="login-modal">
            <div class="login-container">
              <span class="close-btn" onclick="closeRegister()">×</span>
              <h2>Register</h2>
              <form id="registerForm">
                <input type="text" id="regUsername" name="regUsername" placeholder="Username" required>
                <input type="email" id="regEmail" name="regEmail" placeholder="Email" required>
                <input type="text" id="regFirstName" name="regFirstName" placeholder="First Name" required>
                <input type="text" id="regLastName" name="regLastName" placeholder="Last Name" required>
                <input type="password" id="regPassword" name="regPassword" placeholder="Password" required>
                <button type="submit" class="button">Register</button>
              </form>
            </div>
          </div>
          
          <!-- Content -->
          <section>
            <header class="main">
              <h1>Rewards Management</h1>
            </header>
            <p>Manage rewards for volunteers. Add new rewards or delete existing ones.</p>
            
            <!-- Add Reward Form -->
            <section>
              <h2>Add a New Reward</h2>
              <form id="rewardForm">
                <div class="field">
                  <label for="rewardName">Name</label>
                  <input type="text" id="rewardName" name="rewardName" placeholder="Reward Name" required>
                </div>
                <div class="field">
                  <label for="rewardDescription">Description</label>
                  <input type="text" id="rewardDescription" name="rewardDescription" placeholder="Reward Description" required>
                </div>
                <div class="field">
                  <label for="rewardDate">Date</label>
                  <input type="date" id="rewardDate" name="rewardDate" value="2025-03-31" required>
                </div>
                <div class="field">
                  <label for="rewardRank">Rank</label>
                  <select id="rewardRank" name="rewardRank" required>
                    <option value="BRONZE">BRONZE</option>
                    <option value="SILVER">SILVER</option>
                    <option value="GOLD">GOLD</option>
                  </select>
                </div>
                <button type="submit" class="button">Add Reward</button>
              </form>
            </section>
            
            <!-- Rewards List -->
            <section>
              <h2>All Rewards</h2>
              <div class="table-wrapper">
                <table id="rewardsTable">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Name</th>
                      <th>Description</th>
                      <th>Date</th>
                      <th>Rank</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Rewards will be populated here -->
                  </tbody>
                </table>
              </div>
            </section>
          </section>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div id="sidebar">
        <div class="inner">
          <!-- Search -->
          <section id="search" class="alt">
            <form method="post" action="#">
              <input type="text" name="query" id="query" placeholder="Search" />
            </form>
          </section>
          
          <!-- Menu -->
          <nav id="menu">
            <header class="major">
              <h2>Menu</h2>
            </header>
            <ul>
              <li><a href="index.html">Homepage</a></li>
              <li>
                <span class="opener">Dashboard</span>
                <ul>
                  <li><a href="dashboard.html">Data Insights</a></li>
                  <li><a href="dashboard.html">Monitoring Tools</a></li>
                </ul>
              </li>
              <li>
                <span class="opener">Community</span>
                <ul>
                  <li><a href="#">Forum</a></li>
                  <li><a href="Community Engagement.html#cleanUpEvents">Clean up events</a></li>
                  <li><a href="#">Volunteer</a></li>
                  <li><a href="#">My Volunteer rewards</a></li>
                </ul>
              </li>
              <li>
                <span class="opener">More</span>
                <ul>
                  <li><a href="#">Guides</a></li>
                  <li><a href="#">FAQ</a></li>
                  <li><a href="#">Policy Updates</a></li>
                  <li><a href="#">Contact Us/Help</a></li>
                </ul>
              </li>
              <li><a href="#">Success Stories</a></li>
              <li><a href="#">About Us</a></li>
            </ul>
          </nav>
          
          <!-- Recent Updates -->
          <section>
            <header class="major">
              <h2>Recent Updates</h2>
            </header>
            <div class="mini-posts">
              <article>
                <a href="#" class="image"><img src="images/pic07.jpg" alt="" /></a>
                <p>Recent Data Submission</p>
              </article>
              <article>
                <a href="#" class="image"><img src="images/pic08.jpg" alt="" /></a>
                <p>Community Highlight</p>
              </article>
              <article>
                <a href="#" class="image"><img src="images/pic09.jpg" alt="" /></a>
                <p>Upcoming Cleanup Event</p>
              </article>
            </div>
            <ul class="actions">
              <li><a href="#" class="button">More</a></li>
            </ul>
          </section>
          
          <!-- Get in touch -->
          <section>
            <header class="major">
              <h2>Get in touch</h2>
            </header>
            <p>For inquiries or contributions related to water hyacinth monitoring, please contact our team.</p>
            <ul class="contact">
              <li class="icon solid fa-envelope"><a href="#">info@hartebeesportdamhyacinthProject.org</a></li>
              <li class="icon solid fa-phone">(000) 000-0000</li>
              <li class="icon solid fa-home">Hartebeesport Dam<br />forgot the City, South Africa</li>
            </ul>
          </section>
          
          <!-- Footer -->
          <footer id="footer">
            <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
          </footer>
        </div>
      </div>
    </div>
    
    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/loginregister.js"></script>
    
    <!-- Rewards API JavaScript -->
    <script>
      const BASE_URL = "http://localhost:8080";

      // Fetch and display all rewards
      async function getRewards() {
        try {
          const response = await fetch(`${BASE_URL}/rewards`);
          if (response.ok) {
            const rewards = await response.json();
            const tbody = document.querySelector("#rewardsTable tbody");
            tbody.innerHTML = "";
            rewards.forEach(reward => {
              const tr = document.createElement("tr");
              tr.innerHTML = `
                <td>${reward.id || '-'}</td>
                <td>${reward.name}</td>
                <td>${reward.description}</td>
                <td>${reward.date}</td>
                <td>${reward.rank}</td>
                <td>
                  <button class="button" onclick="deleteReward(${reward.id})">Delete</button>
                </td>
              `;
              tbody.appendChild(tr);
            });
          } else {
            alert("Failed to fetch rewards.");
          }
        } catch (error) {
          console.error("Error fetching rewards:", error);
        }
      }

      // Add a new reward
      document.getElementById("rewardForm").addEventListener("submit", async function(e) {
        e.preventDefault();
        const reward = {
          name: document.getElementById("rewardName").value.trim(),
          description: document.getElementById("rewardDescription").value.trim(),
          date: document.getElementById("rewardDate").value,
          rank: document.getElementById("rewardRank").value
        };
        try {
          const response = await fetch(`${BASE_URL}/rewards`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(reward)
          });
          if (response.ok) {
            alert("Reward added successfully!");
            document.getElementById("rewardForm").reset();
            getRewards();
          } else {
            alert("Failed to add reward.");
          }
        } catch (error) {
          console.error("Error adding reward:", error);
        }
      });

      // Delete reward by ID
      async function deleteReward(id) {
        if (!confirm("Are you sure you want to delete this reward?")) return;
        try {
          const response = await fetch(`${BASE_URL}/rewards/${id}`, {
            method: "DELETE"
          });
          if (response.ok) {
            alert("Reward deleted!");
            getRewards();
          } else {
            alert("Failed to delete reward.");
          }
        } catch (error) {
          console.error("Error deleting reward:", error);
        }
      }

      // Initialize rewards list on page load
      document.addEventListener("DOMContentLoaded", getRewards);
    </script>
  </body>
</html>
